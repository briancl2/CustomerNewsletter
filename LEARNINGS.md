# Learnings

> Every run produces at least one lesson that makes the next run better.
> Every lesson has an ID, evidence, and a concrete fix.

| ID | Lesson | Evidence | Fix |
|---|---|---|---|
| L1 | Analysis without action is the default failure mode | autonomous_loops_guide.md principle #1 | Enforce ≤40% analysis, ≥60% execution in all phases |
| L2 | Trust disk, not self-reports | autonomous_loops_guide.md principle #2; agents claim completion without artifacts | Every phase gate checks files with ls and wc -c |
| L3 | Run cheapest tests first | autonomous_loops_guide.md scoring stack | Layer scoring: structural (free) → heuristic (5s) → LLM-judge (5min) |
| L4 | One fix per iteration | autonomous_loops_guide.md principle #4 | Rework loop changes one file, re-measures, decides |
| L5 | Stop rules prevent runaway | autonomous_loops_guide.md principle #10 | Max 3 rework cycles per skill, 5 total per run, 600s timeout per CLI session |
| L6 | grep -P (Perl regex) not available on macOS BSD grep | score-heuristic.sh failed silently with grep -oP | Use grep -E for extended regex; avoid -P entirely |
| L7 | set -o pipefail kills grep chains that find nothing | score-heuristic.sh exited on grep pipe returning 1 | Wrap grep in (grep ... \|\| true) before piping to wc |
| L8 | Forbidden pattern mentions in rules ("never use X") trigger pattern scanners | Heuristic T1.3 finds "Copilot Free" in exclusion rules | Accept as known false positive; scorer still passes tier thresholds |
| L9 | Direct skill building beats fleet dispatch for first run | Built 8 skills in minutes with full context vs 30-60 min fleet latency | Use fleet for subsequent runs; use direct for initial build |
| L10 | Agent refactor is straightforward once skills exist | 454->81 lines in one pass; all domain logic cleanly extractable | Skills-first extraction works; keep agent as pure orchestrator |
| L11 | Governance items get 3x weight in actual editorial practice | 16% of published bullets are governance + they always get expanded treatment | Update selection-criteria.md with 3.0x governance weight |
| L12 | Lead sections have 4 distinct triggers, not just item clustering | Dec=governance cluster, Jun=blockbuster launch, Jan=hot topic, Dec2024=strategic positioning | Encode ALL 4 triggers in theme detection rules, not just clustering |
| L13 | Model availability is always commodity-compressed | 100% of model updates across Dec and Aug are single-bullet consolidated | Make model compression a hard rule, not a suggestion |
| L14 | 7 editorial judgment calls exist that no current rule captures | Novelty scoring, product category detection, ecosystem maturity, audience priority override, magnitude recategorization, structural conventions, evergreen inclusion | These are the real blind spots; address via human Q&A and progressive rule encoding |
| L15 | 14 published newsletters + 4 rich intermediate cycles = sufficient data for editorial pattern extraction | 549 lines of findings from 6 parallel analyses | The benchmark data is an underused asset; structural analysis alone reveals clear patterns |
| L16 | The human's audience-specific emphasis (Healthcare/Manufacturing/FinServ) creates a governance+security bias that generic enterprise filters miss | BYOK, indemnity, data residency consistently prioritized | Add audience-specific weight boosts for regulated-industry signals |
| L17 | Cross-cycle patterns are either structural constants or conditional triggers, never random | Introduction, Copilot, Scale, Events, Closing = always. Lead section, IDE parity, conference tables = conditional with clear triggers | Encode stable patterns as mandatory; conditional patterns as triggered |
| L18 | Competitive positioning is the highest-weight editorial signal | Feb 2026: Agent HQ 3P (Claude+Codex) was THE story; CLI and OpenCode are counter-Claude-Code signals | Add competitive positioning as 3.5x weight, highest in the model |
| L19 | GitHub Blog news-insights posts are NOT in the changelog feed | Agent HQ 3P post was at github.blog/news-insights/company-news/, invisible to changelog-only scanning | url-manifest MUST include blog homepage scan and news-insights/ |
| L20 | VS Code changelogs hide important features behind terse entries | Human says "VS Code updates usually has really important functionality hidden in the change log, please look deeper" | Phase 1B must deep-read the actual VS Code release notes page, not just the changelog entry |
| L21 | Bundling related enterprise items into single bullets is preferred over separate entries | Human bundled supply chain + org custom props + dependabot OIDC into one governance bullet | Add bundling heuristic: when 3+ related governance/security items exist, consolidate into one rich bullet |
| L22 | The human sees platform-openness as a theme (BYOK + 3P + OpenCode + CLI = "take your subscription anywhere") | Feb 2026 correction: the narrative is about customer choice, not just features | Add "platform openness" theme detection: when BYOK + multi-surface + 3P agent support cluster, lead with choice narrative |
| L23 | The editorial review loop must be automated, not manual. Human should not have to ask for iteration. | "i dont want to go through this process manually where i give you the corrections and have to tell you to iterate" | Build review-correct-regenerate into the core pipeline as Phase 5 |
| L24 | Visual Studio release notes are a ROLLING page of patches/CVEs, not versioned feature pages | VS 2022 17.14 has 26 patch versions (17.14.1-17.14.26) on one page. Features section is undated. Patch notes are bug fixes/CVEs. | For VS feature content, use GitHub Changelog ("Copilot in Visual Studio - [Month] update") as primary source. MS Learn page is secondary for patch timeline and buried Copilot items. |
| L25 | Each source URL has a fundamentally different data model requiring source-specific extraction logic | VS Code: versioned pages with rich content. VS: rolling patch page + GH Changelog cross-ref. JetBrains: API with terse notes. Xcode: single CHANGELOG.md. GH Changelog: monthly archives, richest source. | Build per-source intelligence in reference/source-intelligence/{source}.md, not one-size-fits-all extraction. |
| L26 | Per-source item-level tracing (raw to intermediate to published) is the highest-signal training data | Knowing that "VS Code v1.106 Agent Mode Approval" became part of "Copilot Agents Expansion" bullet teaches the consolidation pattern better than any rule description. | Build source-specific translation intelligence from the 4 rich benchmark cycles. |
| L27 | The content-retrieval skill (Phase 1B) and content-consolidation skill (Phase 1C) need source-specific extraction strategies, not a universal format applied to all sources | VS needs deep-read of actual release notes page. JetBrains needs GH Changelog cross-reference. VS needs dual-source (MS Learn patches + GH Changelog features). | Update Phase 1B skill with per-source extraction strategies. |
| L28 | The pipeline does NOT cut items. It adds them. 100% discovery survival across Aug+Jun+May. Dec had 2 cuts out of 42. | Cross-cycle meta-analysis: 33/33 items survived in Aug+Jun, 40/42 in Dec. The real editorial value is in ADDITIONS, BUNDLING, and EXPANSION. | Reframe Phase 1C as "enrichment + consolidation" not just consolidation. Phase 3 curation's job is bundling + flagship detection + gap-filling, not selection. |
| L29 | Visual Studio is never discovered by Phase 1A/1B — it's always added during curation | Aug, Jun, May: VS items came from devblogs during curation, never from discoveries. Only Dec (with per-source interims) had VS in discoveries. | Add devblogs.microsoft.com/visualstudio and devblogs.microsoft.com/devops to Phase 1A source coverage. |
| L30 | Azure ecosystem content is a consistent curation-add across every cycle | Azure DevOps migration (Jun), Azure MCP Server (Jun), Copilot for Azure GA (Jun). Never in discoveries. | Add Azure DevOps blog and Microsoft Learn as Phase 1A sources. |
| L31 | Enablement resources (playbooks, training, Copilot Fridays) are added during curation every cycle | Aug: 7 resource items added. Jun: course links. May: trust article. | If new enablement resources exist for the date range, add them in Phase 3. Do not pad with stale content (Q4=B). |
| L32 | Hypothesis-first V2 generation with automated scoring achieves 50/50 in 1 rework cycle | V1 scored 31/50 on V2 rubric. V2 scored 50/50 after fixing: (1) consumer plan mention, (2) line count +3 lines, (3) rubric false positives | Always define hypotheses and scoring rubric BEFORE generating content. The rubric catches issues the writer misses. |
| L33 | "Copilot Pro+" triggers the consumer plan mention validator even in enterprise context | validate_newsletter.sh regex catches "Copilot Pro+" regardless of context. V2 fixed by rewording to "Copilot Enterprise subscriptions" | When mentioning subscription tiers, use only "Copilot Enterprise" or "enterprise Copilot subscriptions" — never reference consumer plan names. |
| L34 | VS Code release notes are the richest single source for enterprise-relevant Copilot features | v1.109 yielded 7 enterprise-relevant features: Agent Skills GA, Claude Agent, Copilot Memory, parallel subagents, terminal sandboxing, org-wide instructions, MCP Apps. V1 had 0 because it only read the changelog entry. | Always deep-read the full VS Code release notes page for the current month. The changelog entry is a summary; the release notes page has 10-20x more detail. |
| L35 | Bundling related items into themed bullets reduces noise while increasing information density | Enterprise Governance Roundup consolidated 3 separate items. Deprecations and migration notices consolidate into a single Enterprise & Security bullet (no standalone Migration Notices section). | Apply bundling rules from editorial-intelligence.md: governance cluster -> single roundup, deprecations/migrations -> single Enterprise & Security bullet, model availability -> single bullet. |
| L36 | score-selection.sh had an unbound variable bug for header extraction | Variables skill_headers and bench_headers were referenced before assignment. Script ran without crashing but reported 0% structure overlap. | Always test scoring scripts on known inputs before using to grade work. The bug was invisible because bash set -euo pipefail treats unbound vars as errors but the scoring continued with defaults. |
| L37 | Consolidated curated sections score poorly against granular benchmarks | Dec 2025 curated output had 23 bullets (consolidated) vs 37 in benchmark (granular). Selection score was 15/25 before expansion. After restructuring to match benchmark's section layout: 21/25. | The curation skill's bundling rules (from editorial intelligence) produce a different structure than the original pre-intelligence benchmark. Benchmarks must be updated to reflect current editorial style, or scoring must account for intentional structural divergence. |
| L38 | Phase gate orchestrator catches missing prerequisites without crashing | run_newsletter.sh correctly blocked at Phase 3 when Phases 1A-1C outputs were missing, printed clear instructions, and exited with code 1. | File-existence gates with size checks (>10 bytes) are sufficient for pipeline sequencing. The orchestrator's value is in gating and validation, not content generation. |
| L39 | Three source gaps (VS devblogs, Azure devblogs, news-insights) now closed in SOURCES.yaml | L19, L29, L30 all identified these gaps. Adding them to SOURCES.yaml (69->72 sources) ensures the url-manifest skill can generate candidates for them. | Source coverage gaps should be fixed in SOURCES.yaml immediately when identified, not deferred to future sprints. |
| L40 | `set -euo pipefail` in scoring scripts causes silent hangs when glob patterns match nothing | `ls output/*_v[12].md` returns non-zero exit in strict mode, killing the subshell before wc -l runs. Script appears to hang. | Use `set -uo pipefail` (no -e) in scoring scripts. Wrap globs in `(cmd || true)` before piping. |
| L41 | Scoring scripts should avoid `make` invocations and call scripts directly | `make validate-newsletter` inside a scoring script causes pipe buffering issues. Direct `bash script.sh` calls are more reliable. | In scoring rubric scripts, call the underlying script directly, not via make targets. |
| L42 | The editorial review loop is a skill, not a script | L23 called for automating the review loop. The implementation is a SKILL.md (106 lines) with a correction format spec (81 lines), not a bash script. The skill tells an agent what to do; the agent does the LLM work. | Automation in an LLM-first system means writing skills (instructions for agents), not scripts (instructions for computers). Scripts handle gating and validation; skills handle content generation. |
| L43 | Structure validation must be updated when deleting directories | `make validate-structure` checked for prompts-legacy/ after it was deleted per deletion discipline, causing a false failure. | When deleting a directory, also update any validation scripts/Makefile targets that check for its existence. |
| L44 | Periodic repo sync catches drift between documentation and implementation | README.md still described a "KB repo", HANDOFF.md was stale, BUILD_PLAN.md was not marked complete, run_newsletter.sh had a macOS-only date command. | Schedule sync bundles after every major sprint. Documentation drift compounds if left unchecked. |
| L45 | Pre-agentic newsletters (Aug 2025 and earlier) legitimately fail current validation rules | August.md has 10 em dashes and 26 wikilinks. These were standard practice before the agentic era (Jun 2025+). | Only test agentic-era newsletters (Dec 2025+) as known-good inputs. Pre-agentic newsletters are useful as benchmark data but not as validation targets. |
| L46 | Test scripts must not use set -e when wrapping commands that may return non-zero legitimately | Archive test exited 127 when a glob matched nothing inside set -euo pipefail. The test runner captured this as a suite failure. | Use set -uo pipefail (no -e) in test scripts. Wrap expected-failure commands in explicit checks. |
| L47 | Multi-cycle benchmark regression reveals era-dependent quality gaps | Jun 2025 scores 9/25 vs Dec 19/25 and Aug 21/25. Jun used a pre-agentic format with different section structure. | Set cycle-appropriate thresholds (lower for older cycles) rather than a single universal bar. The regression test catches real structural evolution, not bugs. |
| L48 | Intelligence sync must be verified by script, not assumed by convention | Weight drift between editorial-intelligence.md and selection-criteria.md was invisible until check_intelligence_sync.sh automated the comparison. 10 weights, 7 surfaces. | Run `make check-intel-sync` after any intelligence file change. Add to CI. |
| L49 | All 7 editorial blind spots (G1-G7) are now encoded as rules | G1 (evergreen resources), G2 (new product sections), G3 (legal expansion), G4 (IDE deep-read), G5 (cross-category bundling), G6 (context-dependent exclusion), G7 (same-type groups) all verified by grep. | The gap encoding test (test_intelligence_effectiveness.sh) is the ground truth for intelligence coverage. |
| L50 | Controlled re-runs from archived intermediates validate intelligence changes without live web fetches | Feb re-run from archived discoveries+events scored 44/50 pre-corrections, 49/50 post-corrections. No web fetches needed for Phases 3-5. | Use archived intermediates for rapid hypothesis testing. Full pipeline (Phases 1A-1B) only needed when testing source discovery changes. |
| L51 | The 5-trigger lead detection model covers all observed leads across 14 newsletters | Retest confirms: competitive positioning, governance clustering, blockbuster launch, hot-topic urgency, and strategic positioning account for all 6 lead sections found. | The 5-trigger model is sufficient. No new trigger types observed in 14 newsletters spanning 2024-2026. |
| L52 | Phase 5 editorial corrections add 5+ points to V2 rubric scores | Pre-corrections: 44/50. Post-corrections: 49/50. Corrections added Agent HQ 3P (from news-insights blog) and VS Code deep features (7 granular items). | The editorial review loop is the highest-leverage quality step. Agent HQ 3P was invisible to the pipeline but was the most impactful item of the month. |
| L53 | EH-9 (weighted vs equal-weight model comparison) requires A/B testing infrastructure not yet built | Cannot test with existing data: Aug fixture is the published newsletter (100% self-overlap). Need to run curation skill twice with different weight configurations. | Build A/B testing support for weight model comparison in a future sprint. |
| L54 | Calibrated weights and equal weights select the same items; weights drive structure, not selection | A/B test on Feb discoveries: both models pick 17/19 published items. Calibrated adds lead section + governance bundling; equal keeps items flat. score-selection.sh structure overlap: calibrated 20% vs equal 10%. | The weight model's value is in triggering lead sections and governance bundling, not in choosing different items. Keep weights for structural decisions; don't expect them to change item selection. |
| L55 | GitHub Discussion edit history is accessible via GraphQL userContentEdits and contains full body snapshots at each revision | 14 discussions, 145 snapshots, 132 computable diffs extracted. Each "diff" field is actually a full body snapshot, not a traditional diff. Python difflib computes real diffs. | Use extract_discussion_edits.py to mine polishing data. The API returns newest-first; reverse for chronological order. |
| L56 | 34% of manual polishing edits are eliminable by automated structural rules | 13 recurring patterns identified from 132 diffs: heading space (15%), bullet normalization (23%), label format (31%), product names (23%), link refinement (54%), late additions (69%), wording precision (77%). Tier 1 structural fixes alone would prevent ~45 of 132 diffs. | Apply Tier 1 fixes automatically in Phase 4.5 (newsletter-polishing skill). The remaining 66% requires editorial judgment or stronger Phase 3/4 prompts. |
| L57 | The richest polishing signal is "write the introduction last" | 38% of newsletters rewrite the intro highlights paragraph at least once because it drifts from the body content during editing. The intro should be generated AFTER all body sections are finalized. | Phase 4 assembly should generate the introduction as the final step, using actual section content as input for the highlights summary. |
| L70 | Deprecation notes are easier to consume when centralized under Enterprise & Security | Feb 2026 had duplicated deprecation links across sections and a standalone Migration Notices footer. Consolidating removed duplication and kept the ending clean. | Add a dedicated skill (`deprecation-consolidation`) and validator rule: no `# Migration Notices`; use one bundled `Deprecations and Migration Notices` bullet under Enterprise & Security. |
| L71 | Copilot CLI primary source is GitHub Releases, not the blog changelog | Feb 2026: CLI bullet only referenced blog changelog posts, missing ~80% of features shipped in daily releases (v0.0.399–v0.0.408). Blog posts are occasional summaries that lag behind by days/weeks. The releases page had background agents, plugin ecosystem, autopilot mode, MCP config, `/instructions`, `/diff` — none of which appeared in the newsletter until manual review of the releases page. | Added CLI-specific extraction strategy to content-retrieval SKILL.md. Created `reference/source-intelligence/copilot-cli.md`. Updated SOURCES.yaml notes. The releases page (`github.com/github/copilot-cli/releases`) is the discovery source; blog posts are supplementary links for narrative context. |
| L72 | GA labels must have explicit source evidence; omit when ambiguous instead of defaulting to PREVIEW | Feb 2026: BYOK was labeled `GA` but changelog says "public preview". OpenCode was labeled `GA` but changelog has no status label at all. Parallel Subagents was labeled `GA` but VS Code release notes have no explicit label. The pipeline's prior rule was "when in doubt, default to PREVIEW" which was still too aggressive. | Updated content-retrieval SKILL.md status verification rule: labels require exact source text ("generally available", "public preview", etc.). If no explicit qualifier, omit the label entirely. Added common over-claim examples (BYOK, OpenCode) as cautionary patterns. |
| L73 | Packaging release outputs into a dedicated `release_bundle/YYYY-MM_newsletter_launch/` directory keeps publication artifacts auditable and separate from pipeline internals | Feb 2026 deliverables were created under one bounded directory containing newsletter, case study, timeline, TODO gaps, and reusable template scaffold with explicit contracts. | Keep release-bound artifacts in a dedicated bundle path, and avoid scattering publication files across `workspace/`, `output/`, and planning docs. |
| L74 | A domain-specific starter (newsletter) and a domain-agnostic starter should be split into separate repos to avoid coupling and make reuse clearer | The newsletter-focused scaffold was delivered in the release bundle while a generic recurring-workflow starter was created at `/Users/briancl2/repos/copilot-agentic-workflows-template` with independent config, prompts, validation, and docs. | Use two layers: in-repo domain starter for immediate operators, plus separate generic template repo for broader reuse and forking. |
| L75 | Voice memo transcripts are high-value narrative evidence, but they must be explicitly labeled as anecdotal unless corroborated by tracked artifacts | Prior TODO gaps flagged memo 3/4 as missing. After transcript ingestion, chronology and intent became clearer, but quantitative timing claims still lacked deterministic replay evidence. | Store transcripts as immutable source notes (`SOURCE_NOTES/`) and classify each claim as Evidence-backed, Inference, or Anecdote in timeline/report outputs. |
| L76 | Self-learning claims become reproducible only when paired with explicit normalization schema and merge policy | Intelligence concepts were present, but reusable adoption needed a concrete note schema and merge workflow to avoid ad hoc rule drift. | Add `learning_note.schema.yaml` + `learning_note.template.yaml`, and document capture -> normalize -> merge -> reuse in `INTELLIGENCE/learning_loop.md` across both template surfaces. |
| L77 | Scope correctness must fail loudly at template level, not only in repo-specific skills | Timeline-scoping regressions can return when users fork the method without original repo skills and history. | Add deterministic `validate_scope_timeline.sh` script and scope runbook to both template surfaces, and require explicit date-window presence in draft outputs before publish. |
| L78 | Public-safe and internal artifacts must be split and labeled early to preserve high-signal evidence without accidental leakage | February 2026 bundle now contains both public-safe and internal evidence-heavy artifacts (excerpted public timeline and customer case study vs verbatim prompt timeline and internal reports). `TIMELINE_VERBATIM.md` is explicitly marked NOT public-safe; internal docs include local paths and session evidence pointers. | Always produce two layers: public-safe narrative and internal verbatim evidence, and add an explicit “NOT public-safe” banner to verbatim log/excerpt files. Run a credential/secrets pattern scan before publishing. |
| L79 | Final-output validation is necessary but not sufficient; strict process validation must be a separate deterministic gate | Runs could pass `validate_newsletter.sh` while still missing canonical phase artifacts (Phase 1B/1C/3) or relying on shortcut files. | Add `tools/validate_pipeline_strict.sh` and require it as the final gate in prompt, agent, and `run_newsletter.sh`. |
| L80 | From-scratch testing needs explicit run markers and optional no-reuse cleanup to be auditable | Without a cycle marker, it is difficult to prove whether artifacts were regenerated or reused. | Add `tools/prepare_newsletter_cycle.sh` with marker creation and `--no-reuse` archival mode; pair with `--require-fresh` strict validation mode. |
| L81 | Contract drift happens when canonical filenames are "advice" instead of enforced rules | The runtime can create non-canonical files (`fresh_phase*`) that look useful but break reproducibility and downstream gates. | Encode canonical-file enforcement in deterministic validation and fail loudly on shortcut artifacts in strict mode. |
| L82 | Tooling UX should fail fast on wrong input types to reduce false debugging paths | Passing a file path into run-dir scorer arguments created misleading filesystem errors. | Add explicit argument guards in `score-structural.sh` and `score-heuristic.sh` to reject file-path misuse with clear usage output. |
| L83 | Phase 1.5 must be treated as a hard dependency when month notes exist | Feb strict run had `workspace/Jan.md`; pipeline artifacts looked complete but missed curator-note propagation because Phase 1.5 outputs were absent. | Strict validator now auto-detects notes files and fails if `curator_notes_processed_YYYY-MM.md` / `curator_notes_editorial_signals_YYYY-MM.md` are missing or stale. |
| L84 | Event phases can pass superficially while still under-covering long windows | Prior gates only checked that an events file existed; they did not enforce density by time span. | Added event-depth quality checks in strict validation: min event counts by range length, virtual coverage requirement, and source-diversity warnings (Reactor + GitHub events coverage). |
| L85 | VS Code scope versions need continuity checks across phases, not just in scope contract | Scope contract could list versions while downstream phases silently dropped one (for example v1.108 signal loss). | Strict validator now checks each `expected_versions.vscode` value against Phase 1A manifest and Phase 1B VS Code interim; Phase 1C/output gaps are surfaced as warnings. |
| L86 | Fresh-mode runs must fail when scope metadata is created after assembly | Late creation of scope files can hide timeline-scoping bugs and falsely imply phase compliance. | In `--require-fresh`, strict validation now fails if `newsletter_scope_contract_*.json` is newer than final output. |
| L87 | Clean-cycle prep should archive Phase 1.5 outputs too, not only phase artifacts | Re-running without archiving stale curator outputs can create ambiguous freshness and reuse state. | `prepare_newsletter_cycle.sh --no-reuse` now archives `curator_notes_processed_YYYY-MM.md` and `curator_notes_editorial_signals_YYYY-MM.md`, and prints explicit next-step strict validation commands. |
| L88 | File mtimes are insufficient provenance for strict reproducibility; per-phase receipts with hash checks close the gap | Runtime traces showed canonical files could be renamed/touched post hoc and still satisfy chronology-only checks. | Added `tools/record_phase_receipt.sh` and strict provenance checks (run/date alignment, phase constraints, SHA-256 drift detection) in `validate_pipeline_strict.sh` for fresh and benchmark modes. |
| L89 | Benchmark-mode validation should be a first-class gate, not an ad hoc diff step | The run can pass structural validation while still missing benchmark-critical sections and density. | Added benchmark configs under `config/benchmark_modes/` and `--benchmark-mode` support in strict validation. Feb consistency mode now fails loudly on missing sections/subsections and low link/word density. |
| L90 | Curator note-source detection must exclude generated Phase 1.5 artifacts to avoid self-referential freshness checks | `workspace/curator_notes_processed_*` and `workspace/curator_notes_editorial_signals_*` were incorrectly detected as input notes, inflating note count and muddying propagation checks. | Updated strict validator note discovery to exclude generated curator outputs; detection now reports only true source notes (for example `workspace/Jan.md`). |
| L91 | Reliability changes must be wired across all orchestration surfaces or they will be bypassed in real usage | Tooling hardening in one surface (script only) is not enough when runs happen via prompt, agent, and Make targets. | Updated `.github/prompts/run_pipeline.prompt.md`, `.github/agents/customer_newsletter.agent.md`, `tools/run_newsletter.sh`, and `Makefile` to include phase receipt recording and benchmark-mode strict validation pathways. |
| L92 | If curator-note discovery only checks `curator_notes_*.md`, Phase 1.5 is skipped for real monthly note files (`workspace/Jan.md`) and provenance ordering breaks later | Loop-2 initially skipped Phase 1.5 then had to run it late after strict failure, causing phase chronology repair work and extra churn. | Add explicit dual-pattern note detection (`curator_notes_*.md` plus `workspace/[A-Za-z]*.md` with generated-file exclusions) in prompt + agent contracts. |
| L93 | Strict-only PASS can still drift far from published quality; benchmark-mode PASS is the needed convergence signal for this workflow | A run passed strict validation but remained materially shorter and structurally different than Discussion #18. | Treat benchmark mode as mandatory for Feb 2026-style regeneration loops and keep iterating until benchmark contract passes. |
| L94 | Over-compression is best controlled at skill contract level (curation + assembly), not by ad hoc post-edits | Manual expansion steps without contract changes produced inconsistent depth; contract-level density/section requirements produced stable convergence. | Add range-aware depth floors to Phase 3 and explicit assembly density/heading gates (H1/H2 contract, words/links floors) for 60+ day windows. |
| L95 | Events extraction is brittle on JavaScript-rendered sources; deterministic heading/table schema still lets strict gating work while source scraping remains partial | Reactor/resources pages often return non-parseable HTML in CLI fetch mode, causing undercount unless format is explicitly normalized. | Enforce canonical `## Virtual Events` / `## In-Person Events` headings and table rows in Phase 2 output; keep Reactor/Goldcast as warnings when runtime fetch is blocked. |
| L96 | Event quality must validate URL shape, not only event count | Runs can hit event-count floors while still using generic landing/search links that are low-value and unstable. | Strict validator now parses event-row URLs and gates on banned generic URLs + duplicate-link density in fresh/benchmark mode. |
| L97 | Deterministic candidate extraction should be a first-class Phase 2 artifact | Without a machine-readable candidate list, event coverage provenance is hard to verify and easy to patch post hoc. | Added `kb/EVENT_SOURCES.yaml` and `tools/extract_event_sources.py` to produce `workspace/newsletter_phase2_event_sources_<END>.json`; provenance now requires `phase2_event_sources`. |
| L98 | Reactor reliability improves with curated series seeds over search pages | Reactor search URLs are noisy and non-deterministic for row-level event mapping; series pages expose stable event IDs suitable for deep-link extraction. | Standardized Reactor seeds in `kb/EVENT_SOURCES.yaml` (`s-1625`, `S-1631`) and enforce deep-link floors via strict validation. |
| L99 | Benchmark consistency needs both heading-shape and domain-diversity contracts | Section checks alone can pass while source diversity degrades (fewer domains, weaker authority mix). | Added benchmark `forbidden_h1` and `domain_contract` (`min_unique_domains`, `required_domains`) and wired enforcement into strict validator benchmark mode. |
| L100 | Process drift can still happen after a successful generation when post-run edits are made without re-running scope sequencing | Fresh strict gate failed after final newsletter edits because `phase4_scope_results` was older/recorded before refreshed `phase4_output`, even though content quality was high. | Any post-generation content edit must be followed by: re-record `phase4_output`, regenerate/update `newsletter_scope_results_<END>.md`, then re-record `phase4_scope_results` and re-run strict gates. |
| L101 | Benchmark heading/domain contracts are high-leverage and low-noise for convergence | Initial benchmark run failed only on three concrete items (missing top H1, lead H1 regex mismatch, domain diversity 14<16), making remediation deterministic and fast. | Keep benchmark contract strict and explicit; use minimal targeted edits to satisfy heading shape + domain diversity instead of broad rewrites. |
| L102 | From-scratch Copilot runs may satisfy content but still improvise contract steps late (scope files, receipt chronology) | Runtime generated complete artifacts but created scope contract/results during late remediation and manipulated receipt chronology to pass strict checks. | Enforce phase-order discipline as a first-class review criterion and treat any late scope generation as a process defect even when output passes editorial quality. |
| L103 | The current V2 rubric and benchmark contract measure different quality axes and should both be tracked | Final run achieved strict + benchmark PASS but V2 rubric remained 45/50 due rubric-specific penalties (CodeQL standalone and domain whitelist heuristic). | Keep both scores in run reports; use benchmark-mode as release gate for structural consistency, and use V2 rubric as editorial-improvement backlog rather than a hard fail gate. |
| L104 | Delegated phase agents can satisfy artifact existence while silently degrading provenance by manually editing receipts | Orchestrated run `runs/orchestrated/20260216T170836Z_2025-12-05_to_2026-02-13` passed phase artifact checks but strict validator failed with missing `artifact_sha256` and `recorded_at_epoch` for phases 1C, 1.5, and 3. | Never rely on agent-authored receipt JSON. Force deterministic receipt normalization with `tools/record_phase_receipt.sh` after each phase in the orchestrator. |
| L105 | Controlled delegation improves phase completion but does not guarantee benchmark fidelity | Same orchestrated run completed all phases and produced canonical files, yet benchmark mode still failed on lead H1 regex and missing required URL substring (`github.com/features/preview`). | Treat delegation as an execution control, not an editorial guard. Keep explicit benchmark contracts as independent hard gates. |
| L106 | Long-running phases (1B/2/4) are expected under full-window fetches and require explicit per-phase observability | In orchestrated run logs, Phase 1B and Phase 2 each exceeded ~10 minutes. Without per-phase logs and timeouts this appears as an unexplained hang. | Keep timeout/retry controls and RUN_ID-scoped logs mandatory; evaluate phase health via artifact progression, not wall-clock alone. |
| L107 | Failing fast on the first post-run check hides useful diagnostic signal | The original orchestrator exited on the first failing check due `set -e` + piped `tee`, forcing multiple reruns to collect full failure context. | Run the full validation battery and aggregate check failures in summary output; keep final non-zero exit for CI/operator enforcement. |
| L108 | Unconditionally running Phase 1.5 causes avoidable orchestrator failures for windows with no curator notes | Phase 1.5 artifacts are mandatory only when true input notes exist (`workspace/curator_notes_*.md` or month-note files). Running it unconditionally can exhaust retries when no source notes exist. | Detect note presence up front and make Phase 1.5 + Phase 3 curator-signal wiring conditional in the orchestrator. |

## Design Patterns (Correlate with Quality)

| Pattern | Why it works |
|---|---|
| File-driven config | Agents in --no-ask-user mode can't ask; file reads always work |
| Explicit stop rules per prompt | Prevents runaway output |
| Named agent files with model: field | Without this, fleet sub-agents default to cheapest model |
| Disk-based phase gates | Prevents phantom completion claims |
| RUN_ID-scoped artifacts | Enables comparison across runs |

## Anti-Patterns (Avoid)

| Anti-pattern | What goes wrong |
|---|---|
| Trusting self-reports over disk verification | Agents claim "quality testing complete" with 0 files on disk |
| Multiple fixes per iteration | Can't isolate which fix worked |
| No stop rules | Agent analyzes forever, never ships |
| Scattered logs | Can't compare runs or trace failures |
| L58 | Superlative platform claims ("any agent, any model") are factually inaccurate and erode trust | Feb 2026 V1: "bring any agent, use any model" was overclaiming; corrected to "more agents, more models, more surfaces" with value prop | Add superlative audit to polishing Tier 3 (rule 17), validation script, and content-format-spec. The value prop is "one set of terms, one payment, one platform" -- not a capability claim |
| L59 | Link labels must match URL patterns, not be generic. "Announcement" for changelog URLs and "CPO Blog" (meaningless to readers) are common errors | Feb 2026: all changelog links labeled [Announcement], blog posts labeled [CPO Blog]. Customers dont know what CPO means | Add URL-to-label canonical mapping to content-format-spec. Validate in polishing Tier 2 (rule 12b) and validation script |
| L60 | Features get misattributed to the wrong product surface when announced alongside IDE updates | Feb 2026: Agents Tab (github.com) placed under VS Code section; ACP (CLI) also misplaced under VS Code | Add surface attribution rules to content-retrieval and polishing Tier 3 (rule 18). Check actual URL/docs to confirm surface |
| L61 | IDE Parity needs its own section when non-VS-Code IDEs have rich releases | Feb 2026: JetBrains had 4 releases (v1.5.60-1.5.64) with significant features, Xcode had MCP registry support -- all collapsed into one-liner | Add escalation trigger to ide-parity-rules: >=3 JetBrains releases or >=5 total IDE items triggers own section |
| L62 | Date range must overlap with previous newsletter to avoid content gaps | Feb 2026: Dec newsletter covered through Dec 3, but Jan start was Jan 1 -- Dec 4-31 fell into a gap | Add Step 0 (date range overlap check) to url-manifest skill. Check archive/ for previous newsletter end date |
| L63 | Categories from recent newsletters that have zero items must be explicitly audited, not silently omitted | Feb 2026: Code Quality had no updates but this was never checked or noted | Add coverage audit step (Step 5.5) to content-consolidation. List all standard categories and note which have zero items |
| L64 | VS Code named months lag actual release dates by 1-2 months; relying on SOURCES.yaml latest_known or named month causes version misses | Feb 2026: v1.108 titled "December 2025" was released Jan 8, 2026 -- within DATE_RANGE but excluded from scope contract, URL manifest, and content retrieval. When challenged, agent fabricated "released Nov 2025" based on named month. Agent confirmed its own wrong answer 3 times. | Scope contract Step 2 MUST fetch code.visualstudio.com/updates index to enumerate ALL VS Code versions by actual release date. url-manifest Step 1 MUST do the same. content-retrieval must check scope contract version list before processing. SOURCES.yaml now has `previous_versions_in_cycle` field. Gate: >=2 VS Code versions for any 30+ day range |
| L65 | The human's monthly notes file (brain dump of links) contributes 10-18% unique content that the pipeline cannot discover | Analysis of 10 benchmark cycles: community resources, team member gists, VS Code extensions, conference videos, and editorial priority signals all come exclusively from the notes file. Pipeline handles commodity changelog scanning; notes inject the "personally curated" layer. | Built curator-notes skill (Phase 1.5). Processes notes file into extracted items + editorial signals. Named feature hints get 100% survival. Internal links get translated to editorial signals. Integrated into pipeline between Phase 1C and Phase 3. |
| L66 | VS Code weekly releases make version-centric extraction and presentation unworkable; multi-release synthesis requires feature-centric diff-based extraction and cross-IDE alignment matrix | Feb 2026: 2 monthly versions produced a "latest version summary + afterthought bullet" anti-pattern. With weekly cadence (4-5 versions per 30-day period), this would produce 4-5 version summary bullets or massive redundancy. December 2025 gold standard (v1.105+v1.106) proved features should be merged by theme, not listed by version. IDE parity section was missing Eclipse, sparse on labels, and used version-centric JetBrains format. | 3-layer fix: (1) Phase 1B diff-based extraction (read newest VS Code page first, diff earlier for status changes), (2) Phase 3 cross-IDE feature alignment matrix with mandatory per-feature labeling and all-4-IDE inclusion, (3) Phase 4 assembly quality checks for IDE parity completeness and no-version-numbers-in-body rule. Updated scope contract gate from >=2 to >=4 versions for 30+ day ranges. |
| L67 | Three formatting bugs stem from format-spec examples and missing rules: (a) model consolidation example used prose grouping instead of per-model backtick labels, (b) no link format rule for 5+ links caused sub-bullet lists, (c) ambiguous status on model extensions caused cross-section GA/PREVIEW conflicts | Feb 2026: Model bullet said "Now GA: X, Y, Z" instead of "X (`GA`), Y (`GA`)". CLI bullet had 9 sub-bullet links. Gemini 3 Flash was PREVIEW in model bullet but GA in IDE parity bullet. | 3 fixes: (1) Per-model backtick labeling rule + fixed example in format-spec, (2) Threshold-based link format: 1-3 inline, 4-6 inline-wrap, 7+ inline-feature-linking where feature names in prose ARE the links, (3) Default-to-PREVIEW when status ambiguous + cross-section consistency audit in polishing Tier 3 rule 19. |
| L68 | Eight editorial patterns from Feb 2026 human corrections reveal systemic gaps in section structure, link quality, item ordering, and consolidation | Feb 2026: (a) Link labels included status text from changelog titles, (b) github.com Agents Tab misplaced in VS Code section (L60 not enforced at assembly), (c) no docs/implementation links alongside changelog links, (d) non-Copilot items (GHEC DR, GHES) in Copilot at Scale, (e) same-domain items not consolidated (2 secret scanning bullets, code scanning + taskflow separate), (f) no revenue-first ordering, (g) no commercial context on cost-relevant features, (h) GHAS trials buried instead of led with | 8 rules added: (1) Link labels never include status text, (2) Surface attribution enforced at assembly, (3) Every bullet gets docs/implementation link, (4) Revenue-positive items sort first, (5) Non-Copilot enterprise items in Enterprise & Security not Copilot at Scale, (6) Same-domain consolidation mandatory, (7) Commercial context on cost-relevant features, (8) Section naming reflects content scope |
| L69 | Microsoft Reactor is a rich event source (~28 GitHub-tagged events at any time) that the pipeline was not scanning; events require filtering because most are not enterprise-relevant | Feb 2026: Reactor search for "github" returns 28 events. Human selected 14. Excluded: non-English (Spanish series), competition/gaming formats (Agents League Battle), generic AI tutorials without GitHub integration (LangChain4j). Included: Agentic DevOps Live series (modernization, security, SRE), VS Code Live releases, AI Dev Days hackathon, Python + Agents with MCP. Key series to track: Agentic DevOps Live (S-1625), VS Code Live (S-1521). | Added Reactor as mandatory event source with include/exclude filter rules. Updated events-extraction SKILL.md Step 1 (scan Reactor) and Step 1.5 (filtering). Added source intelligence to events-formatting.md. Previous newsletters used Reactor occasionally (May/Jun 2025 SF AI Show + Tell) but never systematically. |
